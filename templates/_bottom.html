<footer class="bg-c-gray:-30 text-c-white:-1 px-6 pb-4">
    <section class="pt-10 max-w-1500px" xxl="mx-40">
    <section class="mb-5" md="gap-4">
        <div class="d-flex flex-col flex-wrap j-content-between a-items-start gap-2" md="d-flex flex-row gap-5">
            <div>
              <div class="logo">
                <a href="/">
                  <img src="{{ url_for('static', filename='uploads/' 'bite_francy_white.png') }}" alt="bite logo" class="w-20" />
                </a>
              </div>
            <div class="app-links d-flex flex-col gap-2">
             
              </div>
            </div>
            <details md="d-none">
              <summary class="text-100 text-w-bold mb-2 cursor-pointer ">Partner with Bite</summary>
              <ul class="list-unstyled pl-4">
                <li>
                    <a href="{{url_for('view_partner')}}" class="text-a-center text-c-white:-14">For Partners</a>
                </li>
                <li>
                    <a href="{{url_for('view_restaurant')}}" class="text-a-center text-c-white:-14">For Restaurants</a>
                </li>
              </ul>
            </details>
            <div class="d-none" md="d-block">
                <h3 class="text-100 text-w-bold mb-2">Partner with Bite</h3>
                <ul class="list-unstyled">
                    <li>
                        <a href="{{url_for('view_partner')}}" class="text-a-center text-c-white:-14">For Partners</a>
                    </li>
                    <li>
                        <a href="{{url_for('view_restaurant')}}" class="text-a-center text-c-white:-14">For Restaurants</a>
                    </li>
                </ul>
              </div>
            <details md="d-none">
              <summary class="text-100 text-w-bold mb-2 cursor-pointer">Company</summary>
              <ul class="list-unstyled pl-4">
                <li><a href="#" class="text-c-white:-5 text-100">About Us</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Values</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Jobs</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Responsibility</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Safety</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Investors</a></li>
              </ul>
            </details>
            <div class="d-none" md="d-block">
                <h3 class="text-100 text-w-bold mb-2">Company</h3>
                <ul>
                    <li><a href="#" class="text-c-white:-5 text-100">About Us</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">Values</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">Jobs</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">Responsibility</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">Safety</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">Investors</a></li>
                </ul>
              </div>
            <details md="d-none">
              <summary class="text-100 text-w-bold mb-2 cursor-pointer">Products</summary>
              <ul class="pl-4">
                <li><a href="#" class="text-c-white:-5 text-100">Bite Drive</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Bite Market</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Bite+</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Bite for Work</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Bite Ads</a></li>
              </ul>
            </details>
            <div class="d-none" md="d-block">
                <h3 class="text-100 text-w-bold mb-2">Products</h3>
                <ul class="list-unstyled">
                  <li><a href="#" class="text-c-white:-5 text-100">Bite Drive</a></li>
                  <li><a href="#" class="text-c-white:-5 text-100">Bite Market</a></li>
                  <li><a href="#" class="text-c-white:-5 text-100">Bite+</a></li>
                  <li><a href="#" class="text-c-white:-5 text-100">Bite for Work</a></li>
                  <li><a href="#" class="text-c-white:-5 text-100">Bite Ads</a></li>
                </ul>
              </div>
            <details md="d-none">
              <summary class="text-100 text-w-bold mb-2 cursor-pointer">Useful Links</summary>
              <ul class="list-unstyled pl-4">
                <li><a href="#" class="text-c-white:-5 text-100">Support</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Media</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Contact</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Feedback</a></li>
              </ul>
            </details>
            <div class="d-none" md="d-block">
                <h3 class="text-100 text-w-bold mb-2">Useful Links</h3>
                <ul class="list-unstyled">
                    <li><a href="#" class="text-c-white:-5 text-100">Support</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">Media</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">Contact</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">Feedback</a></li>
                </ul>
              </div>
            <details md="d-none">
              <summary class="text-100 text-w-bold mb-2 cursor-pointer">Follow Us</summary>
              <ul class="list-unstyled pl-4">
                <li><a href="#" class="text-c-white:-5 text-100">Blog</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Instagram</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">Facebook</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">X</a></li>
                <li><a href="#" class="text-c-white:-5 text-100">LinkedIn</a></li>
              </ul>
            </details>
            <div class="d-none" md="d-block">
                <h3 class="text-100 text-w-bold mb-2">Follow Us</h3>
                <ul class="list-unstyled">
                    <li><a href="#" class="text-c-white:-5 text-100">Blog</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">Instagram</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">Facebook</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">X</a></li>
                    <li><a href="#" class="text-c-white:-5 text-100">LinkedIn</a></li>
                </ul>
              </div>
          </div>
          
    </section>
    <div class="mt-20 text-c-white:-5 text-100 d-flex flex-wrap a-items-center gap-5">
        <div class="d-flex gap-3">
          <p>Denmark</p>
          <p>English</p>
          <p>Accessibility</p>
        </div>
        <div class="d-flex flex-col flex-wrap gap-2" md="flex-row">
            <div class="d-flex flex-row a-items-center">
                <p>Accessibility Statement </p>
                <p>User Terms of Service</p>
                <p>Privacy Statement</p>
            </div>
          <div md="ms-16"><p>&copy; Bite 2024</p></div>
        </div>
      </div>
    </section>
</footer>


<script src="{{url_for('static', filename='app.js')}}"></script>
<script src="{{url_for('static', filename='mixhtml.js')}}"></script>

<script>
    mojo({
        patterns : {
           "input": {
               idle : "border border-1 border-c-gray:+25 px-2 rounded-4 h-12 outline-none"
           },
           "button": {
                idle : "border-c-black px-4 rounded-sm h-12 outline-none"
            }           
         },
         
       })
</script>


<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
 
    // Initialize the map
    var map = L.map('map').setView([55.6761, 12.5683], 13);

    // Add OpenStreetMap tile layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 20,
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // function test(){
    //     var markerLocations = [
    //     { coords: [51.5, -0.09], popup: "Marker 1: London" },
    //     { coords: [48.8566, 2.3522], popup: "Marker 2: Paris" },
    //     { coords: [40.7128, -74.0060], popup: "Marker 3: New York" },
    //     { coords: [55.6845, 12.564148], popup: "Marker 4: Tokyo" }
    //     ];

    //     // Loop through the markerLocations array and add markers to the map
    //     markerLocations.forEach(function(location) {
    //         var marker = L.marker(location.coords).addTo(map);
    //         marker.bindPopup(location.popup);
    //     });
    // }

    // setTimeout(test, 3000)
   // Function to add markers
// Function to parse restaurant data
// Clear existing markers

// Clear existing markers

// Clear existing markers from the map
function clearMarkers() {
    map.eachLayer(layer => {
        if (layer instanceof L.Marker) {
            map.removeLayer(layer);
        }
    });
}

// Fetch and display restaurants
function fetchRestaurants(query) {
    fetch(`/restaurants?query=${encodeURIComponent(query)}`, {
        headers: { 'Accept': 'application/json' }
    })
        .then(response => response.json())
        .then(data => {
            // Clear existing markers and restaurant list
            clearMarkers();
            const listContainer = document.querySelector('#restaurant-list');
            listContainer.innerHTML = '';

            // Iterate over fetched restaurant data
            data.forEach(restaurant => {
                // Add marker to the map
                const marker = L.marker([restaurant.restaurant_latitude, restaurant.restaurant_longitude]).addTo(map);
                marker.bindPopup(`
                    <strong>${restaurant.restaurant_name}</strong><br>
                    ${restaurant.restaurant_address}
                `);

                // Add restaurant card to the list view
                const listItem = document.createElement('div');
                listItem.className = 'card';
                listItem.innerHTML = `
                    <h3>${restaurant.restaurant_name}</h3>
                    <p>${restaurant.restaurant_address}</p>
                    <a href="/restaurants/${restaurant.restaurant_pk}/items" class="btn">View Menu</a>
                `;
                listContainer.appendChild(listItem);
            });
        })
        .catch(err => console.error("Error fetching restaurants:", err));
}

// Fetch and display items
function fetchItems(query) {
    fetch(`/items?query=${encodeURIComponent(query)}`, {
        headers: { 'Accept': 'application/json' }
    })
        .then(response => response.json())
        .then(data => {
            // Clear and update the item list
            const listContainer = document.querySelector('#item-list');
            listContainer.innerHTML = '';

            // Iterate over fetched item data
            data.forEach(item => {
                const listItem = document.createElement('div');
                listItem.className = 'card';
                listItem.innerHTML = `
                    <img src="/static/uploads/${item.item_image}" alt="${item.item_title}" class="w-full h-40">
                    <div>
                        <h3>${item.item_title}</h3>
                        <p>Price: ${item.item_price}</p>
                        <p>Category: ${item.item_food_category}</p>
                        <p>Sold by: ${item.restaurant_name}</p>
                        <a href="#" class="btn">Order Now</a>
                    </div>
                `;
                listContainer.appendChild(listItem);
            });
        })
        .catch(err => console.error("Error fetching items:", err));
}

// Search form submission handler
document.querySelector('#search-form').addEventListener('submit', function (event) {
    event.preventDefault(); // Prevent page reload

    const query = document.querySelector('#search-input').value.trim();
    if (!query) return;

    // Fetch both restaurants and items based on the query
    fetchRestaurants(query);
    fetchItems(query);

    // Show list view and hide map view
    document.querySelector('#list-view').classList.remove('hidden');
    document.querySelector('#map-view').classList.add('hidden');
});

// Toggle between map and list views
document.querySelector('#toggle-map').addEventListener('click', () => {
    document.querySelector('#map-view').classList.remove('hidden');
    document.querySelector('#list-view').classList.add('hidden');
});
document.querySelector('#toggle-list').addEventListener('click', () => {
    document.querySelector('#map-view').classList.add('hidden');
    document.querySelector('#list-view').classList.remove('hidden');
});
</script>

</body>
</html>